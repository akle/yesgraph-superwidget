!function(){function e(e,n,t){return window.hasOwnProperty(e)?void t(window[e]):function(r,o){var i=r.createElement(o),a=r.getElementsByTagName(o)[0];i.src=n,a.parentNode.insertBefore(i,a),i.onload=function(){t(window[e])}}(document,"script")}var n,t,r,o,i,a,s="v0.0.2",c="/client-token",u="/address-book",d="/suggested-seen",p="/invites-sent",f="/invites-accepted",l="/analytics/sdk",m={app:null,testmode:!1,target:".yesgraph-invites",contactImporting:!0,promoteMatchingDomain:!1,emailSending:!0,inviteLink:!0,shareBtns:!0};n=-1!==["localhost","lvh.me"].indexOf(window.location.hostname)&&"YesGraph"===window.document.title?window.location.origin:"https://api.yesgraph.com",t=n+"/v0",e("jQuery","https://code.jquery.com/jquery-2.1.1.min.js",function(e){function n(){var e={entries:[{context:{app:{name:window.navigator.appName,version:window.navigator.appVersion},library:{name:"yesgraph.js",version:s},device:{type:"web"},os:{},userAgent:window.navigator.userAgent||null,page:{path:window.location.pathname,referrer:window.document.referrer,search:window.location.search,title:window.document.title,url:window.location.href}},name:window.document.title+": "+window.location.pathname,properties:{app_name:a},timestamp:new Date,type:"screen"}]};return P(l,"POST",e)}function v(n,t){var r=deferred||e.Deferred();return i=n.inviteLink,o=n.token,C.set("yg-client-token",n.token),j.resolve(),t&&r.done(t),r.promise()}function w(n,t){var r=deferred||e.Deferred(),i={appName:a};return i.userData=n||void 0,o=C.read("yg-client-token"),i.token=o||void 0,P(c,"POST",i,v).fail(function(e){r.reject({error:e.error+" Please see docs.yesgraph.com/javascript-sdk"})}),t&&r.done(t),r.promise()}function g(e,n){var t=m.promoteMatchingDomain,r=isNaN(Number(t))?t:Number(t);return e.promote_matching_domain=r,P(u,"POST",e,n)}function h(e){var n=m.promoteMatchingDomain,t=isNaN(Number(n))?n:Number(n);return rawContacts.promote_matching_domain=t,P(u,"GET",null,e)}function y(e,n){return P(d,"POST",e,n)}function k(e,n){return P(p,"POST",e,n)}function T(e,n){return P(f,"POST",e,n)}function S(e){return P("/test","GET",null,e)}function N(e,n){var t=new Error(e);if(t.name="YesGraphError",n)throw t;console.log("YesGraphError",t)}function O(){var e={rankContacts:g,getRankedContacts:h,postSuggestedSeen:y,postInvitesSent:k,postInvitesAccepted:T,hitAPI:P,test:S,getApp:function(){return a},getInviteLink:function(){return i},hasClientToken:function(){return"resolved"===j.state()},getClientToken:function(){return o},getSettings:function(){return m},init:function(e){for(var n in e)m.hasOwnProperty(n)&&(m[n]=e[n]);D.resolve()},hasLoadedSuperwidget:!1,error:N,events:{RANKED_CONTACTS:"ranked.yesgraph.contacts"}};return A().done(function(t){a=t.data("app");var r=t.data(),o={};for(var i in r)m.hasOwnProperty(i)?(m[i]=r[i],m.testmode&&(e.fetchClientToken=w,e.storeClientToken=v,e.logScreenEvent=n)):o[i]=r[i];w(o).then(n)}),e}function P(n,i,a,s,c){var u=c||e.Deferred();"GET"!==i.toUpperCase()&&(a=JSON.stringify(a||{}));var d={url:t+n,data:a,contentType:"application/json; charset=UTF-8",headers:{Authorization:"ClientToken "+o},success:function(e){e="string"==typeof e?JSON.parse(e):e,u.resolve(e)},error:function(e){u.reject(e.responseJSON)}};return"1.9">r?d.type=i:d.method=i,e.ajax(d),s&&u.done(s),u.promise()}function A(){var n,t=setInterval(function(){n=e("#yesgraph"),n.length>0&&D.resolve(n)},100);return D.always(function(){clearInterval(t)}),D.promise()}var D=e.Deferred(),j=e.Deferred();r=e.fn.jquery;var C=function(){function e(e,n,t){var r=e+"="+n;if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),r=r+"; expires="+o.toGMTString()}window.document.cookie=r}function n(e){for(var e=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(var r=n[t];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e)){var o=r.substring(e.length,r.length);if("undefined"!=o)return o}}}function t(n){e(n,"#",-1)}return{set:e,read:n,erase:t}}();window.YesGraphAPI?N("YesGraph API has been loaded multiple times",!0):window.YesGraphAPI=O()})}();